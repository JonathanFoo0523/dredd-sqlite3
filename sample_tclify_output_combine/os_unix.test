set testdir [file dirname $argv0]
source $testdir/tester.tcl

# kill mutants ['15367', '15368', '15370', '15371', '15372', '15376', '15379', '15380', '15381', '15382', '15384', '15387', '15390', '15391', '15392', '15393', '15394']
reset_db
sqlite3_db_config db DEFENSIVE 1
sqlite3_enable_load_extension db 1
do_catchsql_test os_unix-dredd-0.1 {
  SELECT load_extension(0);
} {1 {0.so: cannot open shared object file: No such file or directory}}

# kill mutants ['6923', '6924', '6925', '6926', '6927', '6928', '6929', '6930', '6931', '6932', '6933', '6934', '6935', '6936', '6937', '6938', '6939', '6940', '6941']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test os_unix-dredd-1.1 {
  PRAGMA mmap_size = 10044748665;
} {2147418112}

# kill mutants ['4496']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test os_unix-dredd-2.1 {
  CREATE VIRTUAL TABLE rt1 USING rtree(c0, c1, c2);
           PRAGMA main.cache_size = 0;
           PRAGMA mmap_size = 6287624166836637926;
} {2147418112}
do_catchsql_test os_unix-dredd-2.2 {
           UPDATE   rt1 SET c1=x'7c50';
           UPDATE rt0 SET c4='110839614'  ;
} {1 {no such table: rt0}}

# kill mutants ['15383', '15388']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test os_unix-dredd-3.1 {
  PRAGMA encoding = 'UTF16be';
  CREATE VIRTUAL TABLE a USING rtree_i32(b, c, d);
  CREATE VIRTUAL TABLE rt1 USING rtree_i32(b, c, d);
  PRAGMA journal_mode = PERSIST;
} {persist}
do_execsql_test os_unix-dredd-3.2 {
  VACUUM;
  BEGIN;
  REPLACE INTO a(b, d) VALUES('P', '0.41801360488464556');
  ROLLBACK;
  SELECT rtreecheck('rt1');
} {ok}

# kill mutants ['15375']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test os_unix-dredd-4.1 {
   CREATE TABLE    t0 (  a );
} {}

finish_test
