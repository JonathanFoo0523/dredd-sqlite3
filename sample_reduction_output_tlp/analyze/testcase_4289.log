CREATE VIRTUAL TABLE rt0 USING rtree_i32(c0, c1, c2);
CREATE TABLE t1(c0, c1, c2);
INSERT INTO t1 VALUES('', '', '');
CREATE VIEW v0 AS SELECT TOTAL(0) OVER() FROM rt0, t1;
CREATE TRIGGER IF NOT EXISTS BEFORE UPDATE OF c0 ON t1 BEGIN DELETE FROM t1;
END;
CREATE INDEX IF NOT EXISTS i26 ON t1(
    0 COLLATE BINARY, CASE WHEN CASE WHEN 0 THEN 0 ELSE 0 END
                          THEN 0 WHEN 0 THEN 0 WHEN 0 COLLATE RTRIM THEN 0 END);
INSERT OR IGNORE INTO rt0(c1, c0) VALUES(0, x'');
ANALYZE;
UPDATE t1 SET c0 = 0;
ANALYZE;
INSERT OR REPLACE INTO t1(c2, c0) VALUES(0, 0), (x'', 0);
SELECT *FROM v0, t1;
