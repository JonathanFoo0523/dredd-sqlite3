set testdir [file dirname $argv0]
source $testdir/tester.tcl

# kill mutants ['554', '556']
reset_db
sqlite3_db_config db DEFENSIVE 1
sqlite3_enable_load_extension db 1
do_catchsql_test os-dredd-1.1 {
  SELECT load_extension(0);
} {1 {0.so: cannot open shared object file: No such file or directory}}

# kill mutants ['553']
reset_db
sqlite3_db_config db DEFENSIVE 1
sqlite3_enable_load_extension db 1
do_catchsql_test os-dredd-2.1 {
  CREATE TABLE a(b);
  INSERT INTO a VALUES('');
  UPDATE a SET b = CASE load_extension(0) WHEN 0 THEN 0 END;
} {1 {0.so: cannot open shared object file: No such file or directory}}

finish_test
