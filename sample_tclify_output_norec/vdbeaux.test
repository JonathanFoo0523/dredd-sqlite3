set testdir [file dirname $argv0]
source $testdir/tester.tcl

# kill mutants ['10785', '10788', '10789']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test vdbeaux-dredd-1.1 {
  CREATE VIRTUAL TABLE rt0 USING rtree(c0, a, c2);
  REPLACE INTO rt0 VALUES('', 0, '');
  INSERT OR ABORT INTO rt0(c0, c2) VALUES(1, 0), (x'', '');
} {1 {UNIQUE constraint failed: rt0.c0}}
do_execsql_test vdbeaux-dredd-1.2 {
  UPDATE rt0 SET(c0) = 0;
} {}

# kill mutants ['13036']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test vdbeaux-dredd-2.1 {
           PRAGMA encoding = 'UTF16be';
                          CREATE VIRTUAL TABLE rt0 USING rtree(c0, c1, c2, c3, c4);
                          INSERT INTO rt0(c3, c4) VALUES (0, 0.9375129726531455), ('', 0), (0, 50609);
                          INSERT OR FAIL INTO rt0(c1, c3, c0, c2) VALUES (0, x'', '-63320600',0);
                          CREATE VIRTUAL TABLE rt1 USING rtree_i32(c0, c1, c2);
                          INSERT OR ABORT INTO rt1(c1, c0) VALUES  (0,0), (0,1);
                          SELECT  * FROM rt1, rt0  ORDER BY 1   NULLS LAST, x'' , HEX(rt0.c0) COLLATE RTRIM ;
} {-63320600 0.0 0.0 0.0 0.0 1 0.0 0.0 0.0 0.937512993812561 2 0.0 0.0 0.0 0.0 3 0.0 0.0 0.0 50609.0 -63320600 0.0 0.0 0.0 0.0 1 0.0 0.0 0.0 0.937512993812561 2 0.0 0.0 0.0 0.0 3 0.0 0.0 0.0 50609.0}

# kill mutants ['13372', '13388', '13420']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test vdbeaux-dredd-3.1 {
  SELECT(HEX(0) BETWEEN 0 AND(TRIM(0, 0)));
} {0}

# kill mutants ['3499']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test vdbeaux-dredd-4.1 {
  CREATE TEMPORARY TABLE k (a REAL , b , c  , d  , e   CHECK  ((d)IS(d)));
                                  CREATE VIRTUAL TABLE f USING g;
} {1 {no such module: g}}
do_execsql_test vdbeaux-dredd-4.2 {
                                  CREATE INDEX h ON k(0  ,CASE WHEN 0 THEN 0 ELSE CASE c WHEN a THEN   '0.10039450145938544' END END  ,0 );
                                  CREATE  INDEX i ON k(CAST(a   AS ),d ) WHERE c<0 NOTNULL;
                                  ALTER TABLE k ADD j;
                                  UPDATE k SET a  =  'j㯞Z죐' WHERE CAST(d ISNULL AS );
                                  INSERT INTO k VALUES (0.2025944854290832,0, '82db',0, 'u[T<', '488789542'), ('400121251', '0.38902975025027886', 0.07127207802638802, 0.24110128820190413, 'd6c1', 0.602075718166772), ('',0, x'',0,0, x''), (x'', 0.8154063263213006, x'', x'', NULL, 0.7660530260427918);
                                  UPDATE k SET c=NULL;
} {}

finish_test
