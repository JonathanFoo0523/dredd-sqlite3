set testdir [file dirname $argv0]
source $testdir/tester.tcl

# kill mutants ['2224', '2225', '2226', '2228', '2230', '2232', '2233', '2234']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test func-dredd-1.1 {
  CREATE VIRTUAL TABLE a USING fts4;
  INSERT INTO a VALUES(0);
  SELECT *FROM a WHERE(CASE WHEN ROUND(1, a) THEN 1 END);
} {}

# kill mutants ['2180', '2181', '2182', '2183', '2184']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test func-dredd-2.1 {
  CREATE VIRTUAL TABLE a USING rtree_i32(b, d, e, +f);
  CREATE TABLE t0(g);
  INSERT INTO a(f) VALUES('');
  INSERT OR IGNORE INTO t0 VALUES('');
  INSERT INTO a(f) VALUES(NULL);
  ALTER TABLE t0 ADD c;
  SELECT *FROM a, t0 ORDER BY CASE WHEN 1 THEN ROUND(f, c) END;
} {1 0 0 {} {} {} 2 0 0 {} {} {}}

# kill mutants ['8991']
reset_db
sqlite3_db_config db DEFENSIVE 1
sqlite3_enable_load_extension db 1
do_catchsql_test func-dredd-3.1 {
  CREATE VIRTUAL TABLE rt0 USING e(   0;
} {1 {incomplete input}}
do_catchsql_test func-dredd-3.2 {
    CREATE VIRTUAL TABLE a USING fts4(b );
    INSERT   INTO a VALUES(0.8524980249232552);
    SELECT  *FROM rt0 WHERE(CASE((rt0.f)NOT BETWEEN(rt0.f) AND(rt0.c))                                WHEN(rt0.g) THEN rt0.f END) ORDER     BY(d( - 0) < ((rt0.b)IS 0)) ;
} {1 {no such table: rt0}}
do_catchsql_test func-dredd-3.3 {
    SELECT *FROM a WHERE(load_extension(b)BETWEEN(NOT 0)                             AND(0  AND(0))LIKE(0 < 0));
} {1 {0.852498024923255.so: cannot open shared object file: No such file or directory}}

# kill mutants ['4725', '4726']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test func-dredd-4.1 {
  SELECT 0 LIKE(0);
} {1}

# kill mutants ['10116', '10121', '10122', '10148', '10153', '10154', '8987', '8988']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test func-dredd-5.1 {
  SELECT TOTAL('íž‘');
} {0.0}

# kill mutants ['5578', '5610']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test func-dredd-6.1 {
  CREATE TABLE a(b);
  INSERT INTO a VALUES('fL');
  REPLACE INTO a VALUES('680691793');
  SELECT *FROM a ORDER BY(b)
  NOT BETWEEN 0 AND(CHAR(b));
} {680691793 fL}

# kill mutants ['2267', '2268', '2319', '2320', '2352']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test func-dredd-7.1 {
  CREATE TABLE a(b, c);
  ALTER TABLE a RENAME b TO d;
  INSERT INTO a(d) VALUES(0.43682412961536365);
  UPDATE a SET c = '-1882164703';
  ALTER TABLE a RENAME c TO e;
  SELECT 0 FROM a WHERE(ROUND(d, e));
} {}

# kill mutants ['8945', '8946', '8947', '8948', '8950', '8951', '8956', '8958', '8962', '8965', '8966', '8979', '8980', '8981', '8982', '8983', '8994', '8997', '8998', '9011', '9012', '9013', '9014', '9015']
reset_db
sqlite3_db_config db DEFENSIVE 1
sqlite3_enable_load_extension db 1
do_catchsql_test func-dredd-8.1 {
  SELECT load_extension(0);
} {1 {0.so: cannot open shared object file: No such file or directory}}

# kill mutants ['2321', '2324', '2331', '2333']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test func-dredd-9.1 {
  SELECT ROUND(0);
} {0.0}

# MODIFIED: ADD SURROUNDING {}
# kill mutants ['5608', '5623']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test func-dredd-10.1 {
  CREATE VIRTUAL TABLE a USING fts5(b);
  INSERT INTO a VALUES('5s^S.\>');
  SELECT *FROM a(CHAR(1) < b);
} {{5s^S.\>}}

# kill mutants ['8974', '8977', '8978', '9006', '9009', '9010']
reset_db
sqlite3_db_config db DEFENSIVE 1
sqlite3_enable_load_extension db 1
do_execsql_test func-dredd-11.1 {
  CREATE TABLE a(b);
  ALTER TABLE a ADD c;
  INSERT INTO a(b) VALUES(0);
  SELECT(SELECT 0 FROM a ORDER BY load_extension(c));
} {0}

# kill mutants ['5609', '5612', '5614', '5621', '5622', '5625', '5626']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test func-dredd-12.1 {
  SELECT CAST(0 AS TEXT) BETWEEN(CHAR( '' )) AND 0;
} {1}

# MODIFIED: ADD SURROUNDING {}
# kill mutants ['5624']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test func-dredd-13.1 {
  CREATE VIRTUAL TABLE a USING fts5(b);
  INSERT INTO a VALUES('5s^S.\>');
  SELECT *FROM a(CHAR(b) < b);
} {{5s^S.\>}}

# kill mutants ['7720']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test func-dredd-14.1 {
  SELECT TRIM(0);
} {0}

# kill mutants ['5613']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test func-dredd-15.1 {
  SELECT CHAR(0);
} {{}}

# kill mutants ['3683']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test func-dredd-16.1 {
  CREATE VIRTUAL TABLE rt0 USING rtree(c0, a, b);
  INSERT INTO rt0(b) VALUES('');
  CREATE VIEW v0(c0)
  AS SELECT(CASE WHEN '' THEN 0 ELSE 1 END) AND 1 BETWEEN 0 AND(rt0.c0) FROM rt0;
  INSERT OR IGNORE INTO rt0 VALUES(0, '', '');
  SELECT *FROM v0 ORDER BY(LIKE(v0.c0, 1, '0'));
} {0 1}

# kill mutants ['2335']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test func-dredd-17.1 {
  CREATE TABLE a(b REAL);
  INSERT INTO a VALUES('824834874');
  SELECT *FROM a WHERE(ROUND(b));
} {824834874.0}

# kill mutants ['2605']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test func-dredd-18.1 {
                    CREATE TABLE a (c   , e INT , d INT , c4  , f  , c6    );
                              ALTER TABLE a RENAME  f TO b;
                             ALTER TABLE a ADD  g ;
                             ALTER TABLE a RENAME  c4 TO c31;
                             ALTER TABLE a RENAME TO h;
                              INSERT INTO h(b, e, c31, d, g, c, c6) VALUES (0, '1949655825', 0.4437508745199624, '3a75', '2113481774',0, '');
                              SELECT 0 FROM  h      WHERE UPPER(c31||c31)  ;
} {0}

finish_test
