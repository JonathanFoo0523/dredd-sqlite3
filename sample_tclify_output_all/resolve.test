set testdir [file dirname $argv0]
source $testdir/tester.tcl

# kill mutants ['8973']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test resolve-dredd-1.1 {
  CREATE TABLE a(b);
  CREATE VIRTUAL TABLE c USING rtree(d, e, f);
  SELECT NULL FROM a JOIN c ON(0 BETWEEN g AND 0) GROUP BY 0;
} {1 {no such column: g}}

# kill mutants ['4330']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test resolve-dredd-2.1 {
  SELECT CASE(a)
  WHEN b THEN 8.23588741E8 END;
} {1 {no such column: a}}

# kill mutants ['8262', '8263', '8264']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test resolve-dredd-3.1 {
  SELECT COUNT() OVER(), 0 IN() GROUP BY a IN();
} {1 0}

# kill mutants ['4848']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test resolve-dredd-4.1 {
  CREATE VIRTUAL TABLE a USING rtree(c0, d, b);
  SELECT ~CAST(c0 AS), LIKE(0, (c)NOT NULL) FROM a;
} {1 {no such column: c}}

# kill mutants ['6786', '6789']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test resolve-dredd-5.1 {
  SELECT CASE WHEN a() THEN 0 WHEN 0 THEN b END;
} {1 {no such function: a}}

# kill mutants ['4845']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test resolve-dredd-6.1 {
  CREATE VIRTUAL TABLE a USING rtree(c0, b, c);
  SELECT ~CAST(c0 AS), LIKE(0, 0 NOT NULL) FROM a;
} {}

# kill mutants ['8265']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test resolve-dredd-7.1 {
  CREATE VIRTUAL TABLE a USING rtree(b, c, d);
  SELECT d FROM a GROUP BY 074340;
} {1 {1st GROUP BY term out of range - should be between 1 and 1}}

# kill mutants ['4075']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test resolve-dredd-8.1 {
  CREATE TABLE a(b);
  CREATE INDEX c ON a(d);
} {1 {no such column: d}}

# kill mutants ['4817']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test resolve-dredd-9.1 {
  CREATE VIRTUAL TABLE vt0 USING fts5(c0);
  SELECT((~c0)) % 0, GROUP_CONCAT(0 NOTNULL) FROM vt0;
} {{} {}}

finish_test
