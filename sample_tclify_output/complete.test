set testdir [file dirname $argv0]
source $testdir/tester.tcl

# kill mutants ['218', '250', '259', '278']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test complete-dredd-1.1 {
  UPDATE a SET b=END; -- 
} {1 {no such table: a}}
do_catchsql_test complete-dredd-1.2 {
  ROLLBACK ;
} {1 {cannot rollback - no transaction is active}}

# kill mutants ['385', '417']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test complete-dredd-2.1 {
  VALUES('bm2510.0 5.0');
} {bm2510.0 5.0 }
do_catchsql_test complete-dredd-2.2 {
  INSERT INTO a VALUES('rebuild');
} {1 {no such table: a}}

# kill mutants ['651']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test complete-dredd-3.1 {
  CREATE TEMP TABLE a(b);
  CREATE VIRTUAL TABLE c USING d;
} {1 {no such module: d}}

# kill mutants ['683']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test complete-dredd-4.1 {
  CREATE TEMP TABLE a(b);
  ROLLBACK;
} {1 {cannot rollback - no transaction is active}}

# kill mutants ['253']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test complete-dredd-5.1 {
  VALUES('optimize'); -- 
} {optimize }
do_catchsql_test complete-dredd-5.2 {
  0a;
} {1 {unrecognized token: "0a"}}

# kill mutants ['208', '221']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test complete-dredd-6.1 {
  UPDATE a SET b=c; -- 
} {1 {no such table: a}}
do_catchsql_test complete-dredd-6.2 {
  ROLLBACK ;
} {1 {cannot rollback - no transaction is active}}

finish_test
