set testdir [file dirname $argv0]
source $testdir/tester.tcl

# kill mutants ['4146']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test window-dredd-9.1 {
  PRAGMA temp_store=MEMORY ;
  CREATE TABLE t0 (c0  , c1  , c2  );
  ALTER TABLE t0 ADD c5 ;
  INSERT INTO a VALUES ('');  0ms;
} {1 {no such table: a}}
do_execsql_test window-dredd-9.2 {
  ALTER TABLE t0 ADD COLUMN c9 INTEGER; -- 0ms
  INSERT OR REPLACE INTO t0(c5, c2, c1, c0, c9) VALUES ('', NULL, '', NULL, NULL); -- 0ms
  ALTER TABLE t0 RENAME TO t1; -- 0ms
  ALTER TABLE t1 RENAME TO t0; -- 0ms
  SELECT ALL PERCENT_RANK() OVER (), ( t0.c9) IS FALSE, LEAD(json_remove(CASE WHEN t0.c1 THEN t0.c2 WHEN t0.c9 THEN t0.c5 WHEN t0.c2 THEN t0.c9 END,  NOT NULL, 0, COALESCE(t0.c0, t0.c0)), 0.3917770324424138, 0%0 NOTNULL) OVER ( PARTITION BY RTRIM(t0.c0)OR(0), x'') FROM t0 WHERE '1476944519'  ;
} {0.0 0 0}

finish_test
