set testdir [file dirname $argv0]
source $testdir/tester.tcl

# kill mutants ['410']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test complete-dredd-1.1 {
  VALUES('51726092')
   ;
} {51726092}
do_catchsql_test complete-dredd-1.2 {
  END ;
} {1 {cannot commit - no transaction is active}}

# kill mutants ['651']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test complete-dredd-2.1 {
  CREATE TEMP TABLE a(b);
  INSERT INTO c VALUES('7c7a');
} {1 {no such table: c}}

# kill mutants ['683']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test complete-dredd-3.1 {
  CREATE TEMP TABLE a(b);
  ROLLBACK;
} {1 {cannot rollback - no transaction is active}}

# kill mutants ['208', '240']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test complete-dredd-4.1 {
  REINDEX BINARY; -- ms
  ROLLBACK ; 
} {1 {cannot rollback - no transaction is active}}

# kill mutants ['253']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test complete-dredd-5.1 {
  ROLLBACK TRANSACTION; -- 
} {1 {cannot rollback - no transaction is active}}
do_execsql_test complete-dredd-5.2 {
  VALUES ('cba4cded'); 
} {cba4cded}

finish_test
