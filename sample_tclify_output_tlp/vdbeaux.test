set testdir [file dirname $argv0]
source $testdir/tester.tcl

# kill mutants ['13420']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_execsql_test vdbeaux-dredd-1.1 {
  CREATE TABLE d(c0, a, b);
  ALTER TABLE d RENAME c0 TO c;
  INSERT INTO d(a, b) VALUES('7.eE%Z\}', '');
  SELECT 0 FROM d GROUP BY 1 HAVING(MIN(a) BETWEEN(c)
                                        AND(GROUP_CONCAT(b))) ISNULL;
} {}

# kill mutants ['3499']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test vdbeaux-dredd-2.1 {
  CREATE TABLE t0(a b, c1 REAL NOT NULL UNIQUE, c REAL);
         INSERT OR IGNORE INTO t0 VALUES('1791375552', 'y]', 'df1b9f7920b2'),     ('', '', x''), (0.5517359201765953, 375552, 0x4146c5a);
         UPDATE OR IGNORE t0 SET(c2) = 0 WHERE((0)BETWEEN(0)                                    AND(((t0.c1)BETWEEN(t0.c1) AND(t0.c2))));
} {1 {no such column: c2}}
do_catchsql_test vdbeaux-dredd-2.2 {
         UPDATE OR IGNORE t0 SET c2 = x'' = 0.7321011532371812,                         c2 = x'' WHERE 0                              AND(0);
} {1 {no such column: c2}}
do_execsql_test vdbeaux-dredd-2.3 {
         UPDATE OR REPLACE t0 SET c1 = x'' ;
} {}

# kill mutants ['10949']
reset_db
sqlite3_db_config db DEFENSIVE 1
do_catchsql_test vdbeaux-dredd-3.1 {
  CREATE TABLE t0(c0 PRIMARY KEY);
  INSERT INTO t0 VALUES(''), (1);
  ALTER TABLE t0 RENAME c0 TO c87;
  ALTER TABLE t0 RENAME TO t1;
  BEGIN;
  UPDATE OR ROLLBACK t1 SET(c87) = 0;
} {1 {UNIQUE constraint failed: t1.c87}}
do_catchsql_test vdbeaux-dredd-3.2 {
  SELECT 0 WHERE 0 UNION SELECT 0 WHERE 0 UNION
      SELECT 0 WHERE(json_insert(0, TOTAL_CHANGES(), ''));
} {1 {bad JSON path: '2'}}

finish_test
